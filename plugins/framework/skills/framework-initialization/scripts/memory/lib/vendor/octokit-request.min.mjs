var V=Object.create;var U=Object.defineProperty;var W=Object.getOwnPropertyDescriptor;var z=Object.getOwnPropertyNames;var J=Object.getPrototypeOf,G=Object.prototype.hasOwnProperty;var K=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var M=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of z(t))!G.call(e,n)&&n!==r&&U(e,n,{get:()=>t[n],enumerable:!(s=W(t,n))||s.enumerable});return e};var Q=(e,t,r)=>(r=e!=null?V(J(e)):{},M(t||!e||!e.__esModule?U(r,"default",{value:e,enumerable:!0}):r,e));var L=K((we,b)=>{"use strict";var E=function(){};E.prototype=Object.create(null);var j=/; *([!#$%&'*+.^\w`|~-]+)=("(?:[\v\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\v\u0020-\u00ff])*"|[!#$%&'*+.^\w`|~-]+) */gu,v=/\\([\v\u0020-\u00ff])/gu,_=/^[!#$%&'*+.^\w|~-]+\/[!#$%&'*+.^\w|~-]+$/u,d={type:"",parameters:new E};Object.freeze(d.parameters);Object.freeze(d);function k(e){if(typeof e!="string")throw new TypeError("argument header is required and must be a string");let t=e.indexOf(";"),r=t!==-1?e.slice(0,t).trim():e.trim();if(_.test(r)===!1)throw new TypeError("invalid media type");let s={type:r.toLowerCase(),parameters:new E};if(t===-1)return s;let n,c,i;for(j.lastIndex=t;c=j.exec(e);){if(c.index!==t)throw new TypeError("invalid parameter format");t+=c[0].length,n=c[1].toLowerCase(),i=c[2],i[0]==='"'&&(i=i.slice(1,i.length-1),v.test(i)&&(i=i.replace(v,"$1"))),s.parameters[n]=i}if(t!==e.length)throw new TypeError("invalid parameter format");return s}function I(e){if(typeof e!="string")return d;let t=e.indexOf(";"),r=t!==-1?e.slice(0,t).trim():e.trim();if(_.test(r)===!1)return d;let s={type:r.toLowerCase(),parameters:new E};if(t===-1)return s;let n,c,i;for(j.lastIndex=t;c=j.exec(e);){if(c.index!==t)return d;t+=c[0].length,n=c[1].toLowerCase(),i=c[2],i[0]==='"'&&(i=i.slice(1,i.length-1),v.test(i)&&(i=i.replace(v,"$1"))),s.parameters[n]=i}return t!==e.length?d:s}b.exports.default={parse:k,safeParse:I};b.exports.parse=k;b.exports.safeParse=I;b.exports.defaultContentType=d});function w(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&process.version!==void 0?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}var X="0.0.0-development",Y=`octokit-endpoint.js/${X} ${w()}`,Z={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":Y},mediaType:{format:""}};function ee(e){return e?Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{}):{}}function te(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);if(t===null)return!0;let r=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Function.prototype.call(r)===Function.prototype.call(e)}function q(e,t){let r=Object.assign({},e);return Object.keys(t).forEach(s=>{te(t[s])?s in e?r[s]=q(e[s],t[s]):Object.assign(r,{[s]:t[s]}):Object.assign(r,{[s]:t[s]})}),r}function C(e){for(let t in e)e[t]===void 0&&delete e[t];return e}function O(e,t,r){if(typeof t=="string"){let[n,c]=t.split(" ");r=Object.assign(c?{method:n,url:c}:{url:n},r)}else r=Object.assign({},t);r.headers=ee(r.headers),C(r),C(r.headers);let s=q(e||{},r);return r.url==="/graphql"&&(e&&e.mediaType.previews?.length&&(s.mediaType.previews=e.mediaType.previews.filter(n=>!s.mediaType.previews.includes(n)).concat(s.mediaType.previews)),s.mediaType.previews=(s.mediaType.previews||[]).map(n=>n.replace(/-preview/,""))),s}function re(e,t){let r=/\?/.test(e)?"&":"?",s=Object.keys(t);return s.length===0?e:e+r+s.map(n=>n==="q"?"q="+t.q.split("+").map(encodeURIComponent).join("+"):`${n}=${encodeURIComponent(t[n])}`).join("&")}var ne=/\{[^{}}]+\}/g;function se(e){return e.replace(/(?:^\W+)|(?:(?<!\W)\W+$)/g,"").split(/,/)}function ie(e){let t=e.match(ne);return t?t.map(se).reduce((r,s)=>r.concat(s),[]):[]}function R(e,t){let r={__proto__:null};for(let s of Object.keys(e))t.indexOf(s)===-1&&(r[s]=e[s]);return r}function S(e){return e.split(/(%[0-9A-Fa-f]{2})/g).map(function(t){return/%[0-9A-Fa-f]/.test(t)||(t=encodeURI(t).replace(/%5B/g,"[").replace(/%5D/g,"]")),t}).join("")}function g(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function y(e,t,r){return t=e==="+"||e==="#"?S(t):g(t),r?g(r)+"="+t:t}function h(e){return e!=null}function $(e){return e===";"||e==="&"||e==="?"}function ce(e,t,r,s){var n=e[r],c=[];if(h(n)&&n!=="")if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")n=n.toString(),s&&s!=="*"&&(n=n.substring(0,parseInt(s,10))),c.push(y(t,n,$(t)?r:""));else if(s==="*")Array.isArray(n)?n.filter(h).forEach(function(i){c.push(y(t,i,$(t)?r:""))}):Object.keys(n).forEach(function(i){h(n[i])&&c.push(y(t,n[i],i))});else{let i=[];Array.isArray(n)?n.filter(h).forEach(function(a){i.push(y(t,a))}):Object.keys(n).forEach(function(a){h(n[a])&&(i.push(g(a)),i.push(y(t,n[a].toString())))}),$(t)?c.push(g(r)+"="+i.join(",")):i.length!==0&&c.push(i.join(","))}else t===";"?h(n)&&c.push(g(r)):n===""&&(t==="&"||t==="?")?c.push(g(r)+"="):n===""&&c.push("");return c}function ae(e){return{expand:oe.bind(null,e)}}function oe(e,t){var r=["+","#",".","/",";","?","&"];return e=e.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(s,n,c){if(n){let a="",f=[];if(r.indexOf(n.charAt(0))!==-1&&(a=n.charAt(0),n=n.substr(1)),n.split(/,/g).forEach(function(p){var u=/([^:\*]*)(?::(\d+)|(\*))?/.exec(p);f.push(ce(t,a,u[1],u[2]||u[3]))}),a&&a!=="+"){var i=",";return a==="?"?i="&":a!=="#"&&(i=a),(f.length!==0?a:"")+f.join(i)}else return f.join(",")}else return S(c)}),e==="/"?e:e.replace(/\/$/,"")}function D(e){let t=e.method.toUpperCase(),r=(e.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),s=Object.assign({},e.headers),n,c=R(e,["method","baseUrl","url","headers","request","mediaType"]),i=ie(r);r=ae(r).expand(c),/^http/.test(r)||(r=e.baseUrl+r);let a=Object.keys(e).filter(u=>i.includes(u)).concat("baseUrl"),f=R(c,a);if(!/application\/octet-stream/i.test(s.accept)&&(e.mediaType.format&&(s.accept=s.accept.split(/,/).map(u=>u.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${e.mediaType.format}`)).join(",")),r.endsWith("/graphql")&&e.mediaType.previews?.length)){let u=s.accept.match(/(?<![\w-])[\w-]+(?=-preview)/g)||[];s.accept=u.concat(e.mediaType.previews).map(o=>{let l=e.mediaType.format?`.${e.mediaType.format}`:"+json";return`application/vnd.github.${o}-preview${l}`}).join(",")}return["GET","HEAD"].includes(t)?r=re(r,f):"data"in f?n=f.data:Object.keys(f).length&&(n=f),!s["content-type"]&&typeof n<"u"&&(s["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(t)&&typeof n>"u"&&(n=""),Object.assign({method:t,url:r,headers:s},typeof n<"u"?{body:n}:null,e.request?{request:e.request}:null)}function ue(e,t,r){return D(O(e,t,r))}function N(e,t){let r=O(e,t),s=ue.bind(null,r);return Object.assign(s,{DEFAULTS:r,defaults:N.bind(null,r),merge:O.bind(null,r),parse:D})}var P=N(null,Z);var H=Q(L());var m=class extends Error{name;status;request;response;constructor(t,r,s){super(t,{cause:s.cause}),this.name="HttpError",this.status=Number.parseInt(r),Number.isNaN(this.status)&&(this.status=0);"response"in s&&(this.response=s.response);let n=Object.assign({},s.request);s.request.headers.authorization&&(n.headers=Object.assign({},s.request.headers,{authorization:s.request.headers.authorization.replace(/(?<! ) .*$/," [REDACTED]")})),n.url=n.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=n}};var fe="10.0.7",le={headers:{"user-agent":`octokit-request.js/${fe} ${w()}`}};function pe(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);if(t===null)return!0;let r=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Function.prototype.call(r)===Function.prototype.call(e)}var F=()=>"";async function B(e){let t=e.request?.fetch||globalThis.fetch;if(!t)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");let r=e.request?.log||console,s=e.request?.parseSuccessResponseBody!==!1,n=pe(e.body)||Array.isArray(e.body)?JSON.stringify(e.body):e.body,c=Object.fromEntries(Object.entries(e.headers).map(([o,l])=>[o,String(l)])),i;try{i=await t(e.url,{method:e.method,body:n,redirect:e.request?.redirect,headers:c,signal:e.request?.signal,...e.body&&{duplex:"half"}})}catch(o){let l="Unknown Error";if(o instanceof Error){if(o.name==="AbortError")throw o.status=500,o;l=o.message,o.name==="TypeError"&&"cause"in o&&(o.cause instanceof Error?l=o.cause.message:typeof o.cause=="string"&&(l=o.cause))}let x=new m(l,500,{request:e});throw x.cause=o,x}let a=i.status,f=i.url,p={};for(let[o,l]of i.headers)p[o]=l;let u={url:f,status:a,headers:p,data:""};if("deprecation"in p){let o=p.link&&p.link.match(/<([^<>]+)>; rel="deprecation"/),l=o&&o.pop();r.warn(`[@octokit/request] "${e.method} ${e.url}" is deprecated. It is scheduled to be removed on ${p.sunset}${l?`. See ${l}`:""}`)}if(a===204||a===205)return u;if(e.method==="HEAD"){if(a<400)return u;throw new m(i.statusText,a,{response:u,request:e})}if(a===304)throw u.data=await T(i),new m("Not modified",a,{response:u,request:e});if(a>=400)throw u.data=await T(i),new m(me(u.data),a,{response:u,request:e});return u.data=s?await T(i):i.body,u}async function T(e){let t=e.headers.get("content-type");if(!t)return e.text().catch(F);let r=(0,H.safeParse)(t);if(de(r)){let s="";try{return s=await e.text(),JSON.parse(s)}catch{return s}}else return r.type.startsWith("text/")||r.parameters.charset?.toLowerCase()==="utf-8"?e.text().catch(F):e.arrayBuffer().catch(()=>new ArrayBuffer(0))}function de(e){return e.type==="application/json"||e.type==="application/scim+json"}function me(e){if(typeof e=="string")return e;if(e instanceof ArrayBuffer)return"Unknown error";if("message"in e){let t="documentation_url"in e?` - ${e.documentation_url}`:"";return Array.isArray(e.errors)?`${e.message}: ${e.errors.map(r=>JSON.stringify(r)).join(", ")}${t}`:`${e.message}${t}`}return`Unknown error: ${JSON.stringify(e)}`}function A(e,t){let r=e.defaults(t);return Object.assign(function(n,c){let i=r.merge(n,c);if(!i.request||!i.request.hook)return B(r.parse(i));let a=(f,p)=>B(r.parse(r.merge(f,p)));return Object.assign(a,{endpoint:r,defaults:A.bind(null,r)}),i.request.hook(a,i)},{endpoint:r,defaults:A.bind(null,r)})}var Oe=A(P,le);export{Oe as request};
/* v8 ignore else -- @preserve -- Bug with vitest coverage where it sees an else branch that doesn't exist */
/* v8 ignore next -- @preserve */
/* v8 ignore else -- @preserve */
